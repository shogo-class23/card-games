# Mark-Inscribed Monster

## ゲームの概要

Mark-Inscribed Monsterへようこそ。この世界では、4つの属性を持つモンスターを召喚し、神秘的な「パワー」の力で強化してライバルとの決闘に挑みます。

## 新機能と改善点

これまでの改修で、以下の新機能と改善が加えられ、より戦略的で遊びやすいゲームになりました。

*   **動的モンスター名生成:**
    *   「サイズ＋パワー＋種族」の組み合わせで、10,000種類以上のモンスター名を動的に生成できるようになりました。
    *   生成されたモンスターカードはコレクション画面やデッキエディターで確認・利用可能です。
*   **モンスターカードの強化:**
    *   モンスターのサイズに応じて、攻撃に必要なパワー数が自動的に計算されるようになりました（ミニ〜ジャイアント: 1、ハイジャイアント〜: 2、伝説のジャイアント〜: 3、ロボジャイアント〜: 4、覚醒モードミニ〜: 5）。
*   **テーマ別カード表示:**
    *   カードの背景色がモンスターのパワータイプに合わせて動的に変化するようになりました（例: Fireは赤、Waterは青、Starは星マークの色、Emotionは顔文字の色）。
    *   サポートカードは白色で表示されるようになりました。
    *   「Star」タイプは「星」マーク、「Emotion」タイプは「😊」マークとしてカード上に表示されます。
*   **カード表示の調整:**
    *   カード名の文字数が多くても表示枠に収まるよう、動的なフォントサイズ調整が実装されました。
    *   全てのカードタイプ（モンスター、トランプ、サポート）のメインテキストが中央揃えで表示されるようになりました。
*   **ゲームタイトルの変更:**
    *   ゲームタイトルが`Mark-Inscribed Monster`に変更され、ゲームの世界観をより強く表現するようになりました。
*   **デッキ構築の深化:**
    *   デッキは30枚固定となり、同じカードは属性・ランク・数字がすべて同じものに限り2枚までという制限が設けられました。
    *   バトル開始時には保存したデッキから選択するフローに変更され、戦略的なデッキ選びが可能です。
*   **初期手札の安定化:**
    *   ゲーム開始時、プレイヤー・相手ともに初期手札にユニットカードが1枚以上含まれるよう、自動引き直し（マリガン）機能が追加されました。
*   **ターン進行の明確化:**
    *   各ターン開始時に山札からカードを1枚引くドローフェイズが導入されました。
    *   ターン終了時のログには現在の両プレイヤーのポイント状況が表示され、戦況把握が容易になりました。
*   **サポートカードの強化:**
    *   `HEAL`カードで場のユニットカードを選択してHPを3回復する機能が追加されました。
    *   `SKIP`カードで相手のターンを完全にスキップできるようになりました。
*   **AIの公平性と戦略性:**
    *   AIの攻撃は1ターンに各カード1回までに制限され、より公平な対戦環境となりました。
    *   相手先行時の初期配置は裏向きで行われ、プレイヤーが配置完了ボタンを押すまでオープンされないため、駆け引きが生まれます。
    *   相手AIの初期配置の一貫性: 先行・後攻にかかわらず、相手AIは常に裏向きで初期配置を行うようになりました。
*   **勝利条件の拡張:**
    *   勝利条件が「相手の場のカードを全てなくす」または「先に5ポイントを獲得する」に変更され、より多様な勝利パターンが生まれました。
    *   ポイント表示も「現在点数/5」形式になり、目標が明確になりました。
    *   **重要: 勝利条件達成時、即座にゲームが終了するよう修正されました。これにより、不正確な勝敗判定が防止されます。**
*   **詳細なゲームログ:**
    *   ゲーム終了時の結果画面に、ゲーム中の全ログが表示されるようになりました。
*   **ファイル構造の整理:**
    *   開発中の旧バージョンや一時的なファイルが整理され、プロジェクトのクリーンアップが行われました。

## 遊び方（操作方法）

### 1. ゲーム開始前の準備フェーズ

1.  **カードの配置:**
    *   画面下部の手札からモンスターカードを選択し、自分のフィールド（手前6マス）の空いているマスをクリックして配置します。
    *   サポートカードはフィールドには配置できません。
2.  **配置終了:**
    *   最低1体のモンスターを配置したら、「配置OK」ボタンを押してゲームを開始します。

### 2. ゲームプレイ

1.  **ターンの進行:**
    *   プレイヤーと相手が交互にターンを行います。
    *   自分の番が始まったら、**自動的に山札からカードを1枚ドロー**し、**パワーを1獲得**します。
2.  **カードの選択とアクション:**
    *   **自分のフィールドのモンスターカードをクリック**すると、そのカードが選択状態になります。
    *   **パワー注入:** 自分の場のモンスターが選択されている状態で、画面中央の「**パワー注入**」ボタンをクリックすると、そのモンスターにパワーが1貯まります（プレイヤーの総パワーを1消費）。カードにパワーが貯まると、そのモンスターの攻撃力が上昇します。
    *   **攻撃:** 自分の前衛（手前3マス）に配置されたモンスターが選択されている場合、アクションパネルに「攻撃」ボタンが表示されます。「攻撃」ボタンを押してから、相手の前衛モンスターをクリックすると、攻撃が実行されます。攻撃にはモンスターに応じたパワーが必要です。
    *   **サポートカードの使用:** 手札のサポートカードをクリックすると、その効果が発動し、消費されます。サポートカードはフィールドには出せません。
    *   **アクションのキャンセル:** アクションパネルの「キャンセル」ボタンをクリックすると、現在の選択状態が解除され、アクションパネルが閉じます。
3.  **ターン終了:**
    *   自分のアクションを終えたら、「ターン終了」ボタンを押して相手にターンを渡します。

### 3. 勝利・敗北条件

*   **勝利:** 相手のフィールド上のモンスターが全ていなくなると、あなたの勝利です！
*   **敗北:** 自分のフィールド上のモンスターが全ていなくなると、あなたの敗北です。

## 工夫した点

*   **直感的なUI:** カードの選択やアクションがスムーズに行えるよう、コンテキストに応じたUI表示を心がけました。特に、「パワー注入」ボタンは常に中央に配置され、選択中のモンスターに直接作用するよう設計されています。
*   **リソース管理の戦略性:** 「パワー」リソースは、新たなカードの攻撃力を高めるために使用されるため、どのモンスターにいつパワーを注入するかが戦略の鍵となります。
*   **自動ドローとパワー獲得:** 各ターンの開始時に自動でカードドローとパワー獲得が行われるため、ゲームの流れがスムーズで、プレイヤーは戦略的な判断に集中できます。
*   **フィールドの視覚的配置:** 相手フィールドのカードがプレイヤー視点から見て「前衛」が手前になるよう、視覚的な向きを調整し、より対戦感を高めています。
*   **ゲーム終了時の明確な表示:** 勝利または敗北時には、アラートではなくゲーム画面内にメッセージが表示され、プレイヤーが次の行動（ゲームの再開）に移りやすいよう配慮されています。
